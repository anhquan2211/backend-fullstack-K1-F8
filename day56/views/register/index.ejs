<div class="row justify-content-center">
  <div class="col-6">
    <h2 class="text-center">Đăng ký hệ thống</h2>

    <% if (failed?.length) { %>
    <div class="alert alert-danger text-center"><%= failed %></div>
    <% } %> <% if (success?.length) { %>
    <div class="alert alert-success text-center"><%= success[0] %></div>
    <% } %>

    <form action="" method="post">
      <div class="mb-3">
        <label for="">Họ và tên</label>
        <input
          type="text"
          name="name"
          class="form-control"
          placeholder="Name..."
          value="<%= req.old?.name %>"
        />
        <%- req.errors?.name ? `<span class="text-danger"
          >${req.errors?.name}</span
        >`: '' %>
      </div>

      <div class="mb-3">
        <label for="">Email</label>
        <input
          type="email"
          name="email"
          class="form-control"
          placeholder="Email..."
          value="<%= req.old?.email %>"
        />
        <%- req.errors?.email ? `<span class="text-danger"
          >${req.errors?.email}</span
        >`: '' %>
      </div>

      <div class="mb-3">
        <label for="">Mật khẩu</label>
        <input
          type="password"
          name="password"
          id="password"
          class="form-control password"
          placeholder="Password..."
        />
        <%- req.errors?.password ? `<span class="text-danger"
          >${req.errors?.password}</span
        >`: '' %>
      </div>

      <div class="mb-3 password-wrap">
        <label for="">Nhập lại mật khẩu</label>
        <input
          type="password"
          name="passwordRepeat"
          id="passwordRepeat"
          class="form-control password-repeat"
          placeholder="Password..."
          oninput="comparePassword()"
        />
        <%- req.errors?.password ? `<span class="text-danger"
          >${req.errors?.password}</span
        >`: '' %>
        <span id="passwordError" class="text-danger"></span>
      </div>

      <div class="d-grid">
        <button type="submit" class="btn btn-primary btn-register">
          Đăng ký
        </button>
      </div>

      <div class="text-center mt-3">
        <p>Do have an account? <a href="/auth/login">Login</a></p>
      </div>
    </form>
  </div>
</div>

<script type="text/javascript">
  function comparePassword() {
    const password = document.getElementById("password").value;
    const passwordRepeat = document.getElementById("passwordRepeat").value;
    const passwordError = document.getElementById("passwordError");
    const btnRegister = document.querySelector(".btn-register");

    if (password !== passwordRepeat) {
      passwordError.textContent = "Mật khẩu không khớp";
      btnRegister.disabled = true;
    } else {
      passwordError.textContent = "";
      btnRegister.disabled = false;
    }
  }
</script>
