<div class="row justify-content-center">
  <div class="col-6">
    <h2 class="text-center">Đăng nhập hệ thống</h2>

    <% if (failed?.length) { %>
    <div class="alert alert-danger text-center"><%= failed %></div>
    <% } %> <% if (success?.length) { %>
    <div class="alert alert-success text-center"><%= success[0] %></div>
    <% } %> <% if (msg?.length) { %>
    <div class="alert alert-success text-center"><%= msg[0] %></div>
    <% } %>

    <form id="loginForm" action="" method="post">
      <div class="mb-3">
        <label for="">Email</label>
        <input
          type="email"
          name="email"
          class="form-control"
          placeholder="Email..."
          value="<%= req.old?.email %>"
        />
        <%- req.errors?.email ? `<span class="text-danger"
          >${req.errors?.email}</span
        >`: '' %>
      </div>

      <div class="mb-3">
        <label for="">Password</label>
        <input
          type="password"
          name="password"
          class="form-control"
          placeholder="Password..."
          value="<%= req.old?.password %>"
        />
        <%- req.errors?.password ? `<span class="text-danger"
          >${req.errors?.password}</span
        >`: '' %>
      </div>

      <div class="d-grid">
        <button type="submit" class="btn btn-primary">Đăng nhập</button>
      </div>

      <div class="text-center mt-3">
        <p>Do not have an account? <a href="/auth/register">Register</a></p>
      </div>
    </form>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    document
      .getElementById("loginForm")
      .addEventListener("submit", function (event) {
        const platform = navigator.platform;

        // Add a hidden input field to the form to send the platform information
        const platformInput = document.createElement("input");
        platformInput.type = "hidden";
        platformInput.name = "platform";
        platformInput.value = platform;

        // Append the hidden input to the form
        this.appendChild(platformInput);
      });
  });
</script>
